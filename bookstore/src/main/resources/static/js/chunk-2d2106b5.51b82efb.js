(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2106b5"],{b88a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.authorities},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[t._v("用户权限管理")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.state.create=!0}}},"v-btn",o,!1),a),[t._v(" New Authority ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),i("v-card-text",[i("v-form",{ref:"authorityForm",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{rules:t.rules.userRules,label:"User"},model:{value:t.editedItem.user.id,callback:function(e){t.$set(t.editedItem.user,"id",e)},expression:"editedItem.user.id"}})],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{rules:t.rules.authorityRules,label:"Authority"},model:{value:t.editedItem.authority,callback:function(e){t.$set(t.editedItem,"authority",e)},expression:"editedItem.authority"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),t.state.create?i("v-btn",{attrs:{disabled:!t.valid,color:"blue darken-1",text:""},on:{click:t.create}},[t._v("Create")]):t._e(),t.state.update?i("v-btn",{attrs:{disabled:!t.valid,color:"blue darken-1",text:""},on:{click:t.update}},[t._v("Update")]):t._e()],1)],1)],1),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("Are you sure you want to delete this item?")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.closeDelete()}}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.deleteItemConfirm()}}},[t._v("OK")]),i("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),i("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[i("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}])})],1)],1)],1)},o=[],s=(i("4b1c"),{name:"AuthorityAdmin",data:function(){return{state:{create:!1,update:!1},valid:!0,dialog:!1,dialogDelete:!1,headers:[{text:"User",align:"start",sortable:!1,value:"user.id"},{text:"Authority",align:"start",sortable:!1,value:"authority"},{text:"Actions",value:"actions",sortable:!1}],authorities:[],editedIndex:-1,editedItem:{user:{id:0},authority:""},defaultItem:{user:{id:0},authority:""},rules:{userRules:[function(t){return!!t||"User is none!"},function(t){return t>0||"Please input a valid user id!"}],authorityRules:[function(t){return!!t||"Authority is none!"}]}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Authority":"Edit Authority"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},methods:{initialize:function(){var t=this;this.axios.get("api/authorities",{params:{projection:"inlineUser"}}).then((function(e){console.log(e),t.authorities=e.data._embedded.authorities})).catch((function(t){console.log(t)}))},editItem:function(t){this.editedIndex=this.authorities.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0,this.state.update=!0},deleteItem:function(t){this.editedIndex=this.authorities.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){var t=this.authorities[this.editedIndex];this.axios.delete(t._links.self.href).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),this.authorities.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1})),this.state.create=!1,this.state.update=!1},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},create:function(){var t=this,e=this.$refs.authorityForm.validate();e&&(this.axios.post("api/authorities",{user:"api/users/"+this.editedItem.user.id,authority:this.editedItem.authority}).then((function(e){console.log(e),t.initialize()})).catch((function(t){console.log(t)})),this.close())},update:function(){var t=this,e=this.$refs.authorityForm.validate();if(e){var i=this.authorities[this.editedIndex];this.axios.patch(i._links.self.href,{user:"api/users/"+this.editedItem.user.id,authority:this.editedItem.authority}).then((function(e){console.log(e),t.initialize()})).catch((function(t){console.log(t)})),this.close()}}},created:function(){this.initialize()}}),n=s,r=i("4ac2"),l=i("7aad"),d=i.n(l),c=i("0455"),u=i("b6b0"),h=i("e8d7"),v=i("0e6e"),f=i("e903"),m=i("a2c4"),b=i("58a3"),p=i("910e"),x=i("fd12"),I=i("1a1e"),g=i("a9b3"),y=i("dac5"),k=i("d9dc"),_=i("25d6"),C=i("79a5"),V=Object(r["a"])(n,a,o,!1,null,null,null);e["default"]=V.exports;d()(V,{VBtn:c["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VCol:v["a"],VContainer:f["a"],VDataTable:m["a"],VDialog:b["a"],VDivider:p["a"],VForm:x["a"],VIcon:I["a"],VRow:g["a"],VSpacer:y["a"],VTextField:k["a"],VToolbar:_["a"],VToolbarTitle:C["a"]})}}]);
//# sourceMappingURL=chunk-2d2106b5.51b82efb.js.map