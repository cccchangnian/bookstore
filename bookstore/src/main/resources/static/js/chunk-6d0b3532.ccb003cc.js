(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d0b3532"],{"071a":function(t,e,i){"use strict";var s=i("dfee"),n=i("9c48"),a=i("5f1a"),o=i("a817");function r(t){const e=typeof t;return"boolean"===e||"string"===e||t.nodeType===Node.ELEMENT_NODE}e["a"]=Object(a["a"])(s["a"]).extend({name:"detachable",props:{attach:{default:!1,validator:r},contentClass:{type:String,default:""}},data:()=>({activatorNode:null,hasDetached:!1}),watch:{attach(){this.hasDetached=!1,this.initDetach()},hasContent(){this.$nextTick(this.initDetach)}},beforeMount(){this.$nextTick(()=>{if(this.activatorNode){const t=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];t.forEach(t=>{if(!t.elm)return;if(!this.$el.parentNode)return;const e=this.$el===this.$el.parentNode.firstChild?this.$el:this.$el.nextSibling;this.$el.parentNode.insertBefore(t.elm,e)})}})},mounted(){this.hasContent&&this.initDetach()},deactivated(){this.isActive=!1},beforeDestroy(){try{if(this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content),this.activatorNode){const t=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];t.forEach(t=>{t.elm&&t.elm.parentNode&&t.elm.parentNode.removeChild(t.elm)})}}catch(t){console.log(t)}},methods:{getScopeIdAttrs(){const t=Object(n["p"])(this.$vnode,"context.$options._scopeId");return t&&{[t]:""}},initDetach(){if(this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach)return;let t;t=!1===this.attach?document.querySelector("[data-app]"):"string"===typeof this.attach?document.querySelector(this.attach):this.attach,t?(t.appendChild(this.$refs.content),this.hasDetached=!0):Object(o["c"])("Unable to locate target "+(this.attach||"[data-app]"),this)}}})},"36f4":function(t,e,i){"use strict";var s=i("28a8"),n=i("5fc5"),a=i("5f1a"),o=i("9c48"),r=i("a817");const c=Object(a["a"])(s["a"],n["a"]);e["a"]=c.extend({name:"activatable",props:{activator:{default:null,validator:t=>["string","object"].includes(typeof t)},disabled:Boolean,internalActivator:Boolean,openOnHover:Boolean,openOnFocus:Boolean},data:()=>({activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}),watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted(){const t=Object(o["t"])(this,"activator",!0);t&&["v-slot","normal"].includes(t)&&Object(r["b"])('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy(){this.removeActivatorEvents()},methods:{addActivatorEvents(){if(!this.activator||this.disabled||!this.getActivator())return;this.listeners=this.genActivatorListeners();const t=Object.keys(this.listeners);for(const e of t)this.getActivator().addEventListener(e,this.listeners[e])},genActivator(){const t=Object(o["s"])(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=t,t},genActivatorAttributes(){return{role:"button","aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners(){if(this.disabled)return{};const t={};return this.openOnHover?(t.mouseenter=t=>{this.getActivator(t),this.runDelay("open")},t.mouseleave=t=>{this.getActivator(t),this.runDelay("close")}):t.click=t=>{const e=this.getActivator(t);e&&e.focus(),t.stopPropagation(),this.isActive=!this.isActive},this.openOnFocus&&(t.focus=t=>{this.getActivator(t),t.stopPropagation(),this.isActive=!this.isActive}),t},getActivator(t){if(this.activatorElement)return this.activatorElement;let e=null;if(this.activator){const t=this.internalActivator?this.$el:document;e="string"===typeof this.activator?t.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!t){const t=this.activatorNode[0].componentInstance;e=t&&t.$options.mixins&&t.$options.mixins.some(t=>t.options&&["activatable","menuable"].includes(t.options.name))?t.getActivator():this.activatorNode[0].elm}else t&&(e=t.currentTarget||t.target);return this.activatorElement=e,this.activatorElement},getContentSlot(){return Object(o["s"])(this,"default",this.getValueProxy(),!0)},getValueProxy(){const t=this;return{get value(){return t.isActive},set value(e){t.isActive=e}}},removeActivatorEvents(){if(!this.activator||!this.activatorElement)return;const t=Object.keys(this.listeners);for(const e of t)this.activatorElement.removeEventListener(e,this.listeners[e]);this.listeners={}},resetActivator(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},"37b7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:""}},[s("v-row",[s("v-col",[s("v-card",{staticClass:"my-2"},[s("v-row",[s("v-col",{staticClass:"text-center",attrs:{sm:"4"}},[t.bookInventory.icon?s("v-img",{staticClass:"mx-auto mt-3 rounded",attrs:{src:t.bookInventory.icon,width:"160",height:"200"}}):s("v-img",{staticClass:"mx-auto mt-3 rounded",attrs:{src:i("dd0f"),alt:"图书图标",width:"150",height:"150"}}),t.bookInventory.price?s("div",{staticClass:"mt-4"},[s("span",[t._v(t._s(t.bookInventory.price.toFixed(2)))]),s("span",{staticClass:"ml-1"},[t._v("RMB")])]):t._e()],1),s("v-col",{attrs:{sm:"8"}},[s("v-card-title",[t._v(t._s(t.bookInventory.bookName))]),s("v-card-subtitle",{staticClass:"mt-1"},[s("v-icon",{staticClass:"mx-2",attrs:{size:"18"}},[t._v("mdi-pencil")]),s("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.bookInventory.author))]),s("v-icon",{staticClass:"mx-2",attrs:{size:"18"}},[t._v("mdi-store")]),s("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.bookInventory.amount))]),0===t.bookInventory.amount?s("span",{staticClass:"ml-2",staticStyle:{"font-size":"18px"}},[t._v("(库存暂缺)")]):t._e()],1),s("v-card-text",{staticClass:"mt-1"},[s("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[s("v-rating",{attrs:{value:.5*t.bookInventory.rating,color:"amber",dense:"","half-increments":"",readonly:"",size:"18"}}),s("div",{staticClass:"grey--text ms-4"},[t._v(" "+t._s(t.bookInventory.rating.toFixed(2))+" ")])],1),s("div",{staticClass:"mt-4"},[t._v(t._s(t.bookInventory.description))])],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{icon:""}},[s("v-icon",[t._v("mdi-heart")])],1),s("v-btn",{attrs:{icon:""}},[s("v-icon",[t._v("mdi-star")])],1)],1)],1)],1)],1),s("v-row",[s("v-col",[s("v-card",[s("v-card-actions",[s("v-btn",{attrs:{small:""},on:{click:function(e){return t.minus()}}},[s("v-icon",[t._v("mdi-minus")])],1),s("v-chip",{staticClass:"ma-2",attrs:{color:"green","text-color":"white"}},[s("v-avatar",{staticClass:"green darken-4",attrs:{left:""}},[t._v(" "+t._s(t.number)+" ")]),t._v(" numbers ")],1),s("v-btn",{attrs:{small:""},on:{click:function(e){return t.plus()}}},[s("v-icon",[t._v("mdi-plus")])],1),0===t.bookInventory.amount?s("v-btn",{staticClass:"primary ml-4",attrs:{small:"",disabled:""===t.$store.state.accessToken,link:""},on:{click:function(e){return t.reserve()}}},[t._v(" 立即预定 ")]):t._e(),0!==t.bookInventory.amount?s("v-dialog",{attrs:{width:"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"error mx-4",attrs:{small:"",disabled:""===t.$store.state.accessToken}},"v-btn",n,!1),i),[t._v(" 加入购物车 ")])]}}],null,!1,2759925661),model:{value:t.shoppingcartDialog,callback:function(e){t.shoppingcartDialog=e},expression:"shoppingcartDialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("确认加入购物车？")]),s("v-card-text",[t._v(" 您正准备将"+t._s(t.number)+"件商品加入购物车，点击ok以继续 ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:function(e){t.shoppingcartDialog=!1}}},[t._v(" cancel ")]),s("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.shoppingCart()}}},[t._v(" ok ")])],1)],1)],1):t._e(),0!==t.bookInventory.amount?s("v-btn",{staticClass:"warning",attrs:{small:"",disabled:""===t.$store.state.accessToken,link:""},on:{click:function(e){return t.tempShoppingCart()}}},[t._v(" 立即购买 ")]):t._e()],1)],1)],1)],1),s("v-row",[s("v-col",[s("v-card",[s("v-card-title",[t._v("介绍")]),s("v-card-text",[s("div",{staticClass:"text--primary"},[t._v(" "+t._s(t.bookInventory.description)+" ")])])],1)],1)],1),s("v-row",[s("v-col",[""!==t.$store.state.accessToken?s("v-form",[s("v-textarea",{attrs:{outlined:""}}),s("v-btn",{attrs:{color:"primary"}},[t._v("Comment")])],1):s("v-alert",{attrs:{type:"warning"}},[t._v("请先登录后再发表评论！")])],1)],1),s("v-snackbar",{scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[s("v-btn",t._b({attrs:{color:"pink",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" 加入购物车成功！ ")])],1)},n=[],a={name:"BookSaleDetail",data:function(){return{snackbar:!1,shoppingcartDialog:!1,number:1,bookInventory:{id:0,bookName:"",author:"",description:"",price:"",rating:0,amount:0,icon:""}}},methods:{initialize:function(){this.getInventory()},getInventory:function(){var t=this;this.axios.get("/api/bookInventories/"+this.$route.params.inventoryId,{params:{projection:"inlineCategory"}}).then((function(e){t.bookInventory=e.data}))},minus:function(){this.number>1&&(this.number-=1)},plus:function(){this.number<this.bookInventory.amount&&(this.number+=1)},shoppingCart:function(){var t=this;this.axios.post(this.$store.state.user._links.user.href+"/shoppingCart",{inventoryId:this.bookInventory.id,amount:this.number}).then((function(){t.shoppingcartDialog=!1,t.snackbar=!0}))},tempShoppingCart:function(){var t=this;this.axios.post(this.$store.state.user._links.user.href+"/tempShoppingCart",{inventoryId:this.bookInventory.id,amount:this.number}).then((function(){t.$router.push({name:"BookSaleTempOrder"})}))},reserve:function(){var t=this;this.axios.post("/api/bookReserves",{amount:this.number,prePrice:"10.0",totalPrice:this.bookInventory.price,location:this.$store.state.user.location,phone:this.$store.state.user.phone,user:this.$store.state.user._links.user.href,inventory:this.bookInventory._links.bookInventory.href}).then((function(){t.$router.push({name:"BookReserveManagement",params:{id:t.$store.state.user.id}})}))}},created:function(){this.initialize()}},o=a,r=i("4ac2"),c=i("7aad"),l=i.n(c),h=i("afe0"),v=i("7100"),d=i("0455"),u=i("b6b0"),m=i("e8d7"),p=i("6599"),f=i("0e6e"),b=i("e903"),g=i("58a3"),k=i("fd12"),y=i("1a1e"),x=i("c9a1"),A=i("95db"),C=i("a9b3"),_=i("2fbc"),$=i("dac5"),w=i("f5b5"),I=Object(r["a"])(o,s,n,!1,null,null,null);e["default"]=I.exports;l()(I,{VAlert:h["a"],VAvatar:v["a"],VBtn:d["a"],VCard:u["a"],VCardActions:m["a"],VCardSubtitle:m["b"],VCardText:m["c"],VCardTitle:m["d"],VChip:p["a"],VCol:f["a"],VContainer:b["a"],VDialog:g["a"],VForm:k["a"],VIcon:y["a"],VImg:x["a"],VRating:A["a"],VRow:C["a"],VSnackbar:_["a"],VSpacer:$["a"],VTextarea:w["a"]})},"4ec4":function(t,e,i){},"58a3":function(t,e,i){"use strict";i("4ec4");var s=i("e767"),n=i("36f4"),a=i("edcb"),o=i("071a"),r=i("e94f"),c=i("883f"),l=i("a387"),h=i("5fc5"),v=i("685d"),d=i("5f1a"),u=i("a817"),m=i("9c48");const p=Object(d["a"])(n["a"],a["a"],o["a"],r["a"],c["a"],l["a"],h["a"]);e["a"]=p.extend({name:"v-dialog",directives:{ClickOutside:v["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[("v-dialog "+this.contentClass).trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&Object(u["e"])("full-width",this)},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):r["a"].options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick(()=>{this.$nextTick(()=>{this.previousActiveElement=document.activeElement,this.$refs.content.focus(),this.bind()})})},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===m["y"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find(t=>!t.hasAttribute("disabled"));e&&e.focus()}},genContent(){return this.showLazyContent(()=>[this.$createElement(s["a"],{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"document",tabindex:this.isActive?0:void 0,...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])])},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:"none"===this.maxWidth?void 0:Object(m["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(m["g"])(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"883f":function(t,e,i){"use strict";var s=i("a593");e["a"]=s["a"].extend({name:"returnable",props:{returnValue:null},data:()=>({isActive:!1,originalValue:null}),watch:{isActive(t){t?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save(t){this.originalValue=t,setTimeout(()=>{this.isActive=!1})}}})},a387:function(t,e,i){"use strict";var s=i("a593"),n=i("9c48");e["a"]=s["a"].extend().extend({name:"stackable",data(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex(){if("undefined"===typeof window)return 0;const t=this.stackElement||this.$refs.content,e=this.isActive?this.getMaxZIndex(this.stackExclude||[t])+2:Object(n["u"])(t);return null==e?e:parseInt(e)}},methods:{getMaxZIndex(t=[]){const e=this.$el,i=[this.stackMinZIndex,Object(n["u"])(e)],s=[...document.getElementsByClassName("v-menu__content--active"),...document.getElementsByClassName("v-dialog__content--active")];for(let a=0;a<s.length;a++)t.includes(s[a])||i.push(Object(n["u"])(s[a]));return Math.max(...i)}}})}}]);
//# sourceMappingURL=chunk-6d0b3532.ccb003cc.js.map